#include <iostream>
#include <cstdint>
#include <windows.h>
#include "./CPU/cpu.h"

int main(){

    unsigned int HLTNOP[128] = {
        0b0000000000000000,0b0000000000000000,
        0b1110000000000000,0b0000000000000000
    };
    unsigned int REG[128] = {
        0b0110100000000000,0b0101010000000000
    };
    unsigned int MEM[128] = {
        0b0110101000000000,0b0010111000000000,
        0b1000101000000100,0b0101101000000000
    };
    unsigned int ADD[128] = {
        0b0111100000000000,0b0110111000000000,
        0b0111101000000000,0b0000101000000000,
        0b1010011011001101,0b0000000000000000
    };
    unsigned int SUB[128] = {
        0b0110111000000000,0b0011000000000000,
        0b0111000000000000,0b0000011000000000,
        0b1011010001111000,0b0000000000000000
    };
    unsigned int LDI[128] = {
        0b0110100000000000,0b1100011000000000,
        0b1000100000000000,0b1010011000000000,
        0b0010100000000000,0b0110001100000000
    };
    unsigned int LDR[128] = {
        0b0111001000000000,0b0100001000000000,
        0b1001001000000000,0b1111011000000000,
        0b0110101000000000,0b0100001000000000,
        0b0011100101010000,0b0000000000000000
    };
    unsigned int STI[128] = {
        0b0111111000000000,0b1100010000000000,
        0b0100000000000001,0b0111111100000000,
        0b0010010000000000,0b0001011100000000
    };
    unsigned int STR[128] = {
        0b0111100000000000,0b0101011000000000,
        0b0111011000000000,0b0001100000000000,
        0b0101101111000000,0b0000000000000000,
        0b0010010000000000,0b0000110000000000
    };
    unsigned int JUCI[128] = {
        0b1100000000000000, 0b0010000000000000,
        0b0110101000000000, 0b0000001000000000,
        0b0110101000000000, 0b0000010000000000,
        0b0110101000000000, 0b0000011000000000,
        0b0110101000000000, 0b0000100000000000,
    };
    unsigned int JZIp[128] = {
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0000111000000000,
        0b1011011101100101, 0b0000000000000000,
        0b1100010000000000, 0b0010100000000000,
        0b0111000000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JZIn[128] = {
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1011011101100101, 0b0000000000000000,
        0b1100010000000000, 0b0010100000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JNIp[128] = {
        0b0110101000000000, 0b0010001000000000,
        0b0110110000000000, 0b0000111000000000,
        0b1011011101100101, 0b0000000000000000,
        0b1100100000000000, 0b0010100000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000
    };
    unsigned int JNIn[128] = {
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1011011101100101, 0b0000000000000000,
        0b1100100000000000, 0b0010100000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JOIp[128] = {
        0b0110101111111111, 0b1111111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1010011101100101, 0b0000000000000000,
        0b1100110000000000, 0b0010100000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JOIn[128] = {
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1010011101100101, 0b0000000000000000,
        0b1100110000000000, 0b0010100000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JUCR[128] = {
        0b0111111000000000, 0b0001000000000000,
        0b1101001111000000, 0b0000000000000000,
        0b0110111000000000, 0b0000001000000000,
        0b0110110000000000, 0b0000010000000000,
        0b0110101000000000, 0b0000011000000000,
    };
    unsigned int JZRp[128] = {
        0b0111111000000000, 0b0001100000000000,
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0000111000000000,
        0b1011011101100101, 0b0000000000000000,
        0b1101011111000000, 0b0000000000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JZRn[128] = {
        0b0111111000000000, 0b0000111000000000,
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1011011101100101, 0b0000000000000000,
        0b1101011111000000, 0b0000000000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JNRp[128] = {
        0b0110101000000000, 0b0010001000000000,
        0b0110110000000000, 0b0000111000000000,
        0b1011011101100101, 0b0000000000000000,
        0b0111111000000000, 0b0001100000000000,
        0b1101101111000000, 0b0000000000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JNRn[128] = {
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1011011101100101, 0b0000000000000000,
        0b0111111000000000, 0b0001100000000000,
        0b1101101111000000, 0b0000000000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JORp[128] = {
        0b0110101111111111, 0b1111111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1010011101100101, 0b0000000000000000,
        0b0111111000000000, 0b0001100000000000,
        0b1101111111000000, 0b0000000000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int JORn[128] = {
        0b0110101000000000, 0b0000111000000000,
        0b0110110000000000, 0b0010001000000000,
        0b1010011101100101, 0b0000000000000000,
        0b0111111000000000, 0b0001100000000000,
        0b1101111111000000, 0b0000000000000000,
        0b0111001000000000, 0b0000100000000000,
        0b0111000000000000, 0b0000110000000000,
    };
    unsigned int IO[128] = {
        0b0110100111111111, 0b1111111000000000,
        0b0110101000000000, 0b0000000000000000, //0b0110101000000000, 0b0000001000000000,
        0b1000100000000000, 0b0001000000000000,
        0b1100000000000000, 0b0001100000000000,
        0b1010001100100101, 0b0000000000000000,
        0b1100000000000000, 0b0001100000000000,
        0b1110000000000000, 0b0000000000000000
    };
    unsigned int O[128] = {
        0b0110101000000000, 0b0000001000000000,
        0b0111001000000000, 0b0001011000000000,
        0b1010100110010101, 0b0000000000000000,
        0b0011001110010000, 0b0000000000000000,
        0b0010001100000000, 0b0000111100000000,
        0b1100000000000000, 0b0001000000000000,
        0b0000000001101000, 0b0000000001101001,
    };
    unsigned int Timer[128] = {
        0b0110100111111111, 0b1111101000000000,
0b1000100000000000, 0b0001110000000000,
0b0110001000000000, 0b0000010000000000,
0b0110011000000000, 0b1111001000000000,
0b0110011000000000, 0b1101110000000000,
0b0110011000000000, 0b1101110000000000,
0b1110000000000000, 0b0000000000000000,
0b0110011000000000, 0b1111001000000000,

    };

    unsigned int* tests[26] = {
        HLTNOP, REG, MEM, ADD,
        SUB, LDI, LDR, STI,
        STR, JUCI, JZIp, JZIn,
        JNIp, JNIn, JOIp, JOIn,
        JUCR, JZRp, JZRn, JNRp,
        JNRn, JORp, JORn, O, IO,
        Timer
    };

    reset();
    loadMemory(tests[24]);
    runProcessor();
}